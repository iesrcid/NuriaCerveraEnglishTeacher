<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Travel Bingo</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f0f8ff; }
    h1 { margin-top: 20px; }
    #bingo-board { display: grid; grid-template-columns: repeat(5, 80px); justify-content: center; gap: 5px; margin: 20px auto; }
    .cell { padding: 10px; background: white; border: 2px solid #ccc; cursor: pointer; font-size: 0.9em; }
    .marked { background: #90ee90; font-weight: bold; }
    #controls button { margin: 5px; padding: 10px 15px; }
    #called-word { font-size: 2em; margin: 15px; color: #333; font-weight: bold; }
    #check-panel { margin: 20px auto; display: none; flex-wrap: wrap; justify-content: center; gap: 10px; max-width: 500px; }
    .check-word { padding: 10px; border: 2px solid #ccc; background: white; cursor: pointer; }
    .check-word.selected { background: #90ee90; }
    #winners { margin-top: 20px; font-size: 1.2em; color: #444; }
  </style>
</head>
<body>
  <h1>ðŸŽ² Travel Bingo ðŸŽ’</h1>
  <div id="bingo-board"></div>
  <div id="called-word"></div>
  <div id="controls">
    <button onclick="startGame()">Start</button>
    <button onclick="pauseGame()">Pause</button>
    <button onclick="resumeGame()">Resume</button>
    <button onclick="stopGame()">Stop</button>
    <button onclick="restartGame()">Restart</button>
    <button onclick="checkLine()" id="line-btn">Line</button>
    <button onclick="checkBingo()" id="bingo-btn">Bingo</button>
  </div>
  <div id="check-panel"></div>
  <div id="winners"></div>

  <script>
    const words = [
      "Airport", "Ticket", "Suitcase", "Hotel", "Map",
      "Passport", "Flight", "Luggage", "Travel", "Guide",
      "Tour", "Plane", "Journey", "Train", "Reservation",
      "Tourist", "Customs", "Taxi", "Backpack", "Trip",
      "Hostel", "Bus", "Cruise", "Visa", "Terminal"
    ];

    let intervalId = null;
    let currentIndex = 0;
    let shuffled = [];
    let called = [];
    let boardWords = [];
    let lineClaimed = false;
    let bingoClaimed = false;

    const board = document.getElementById("bingo-board");
    const calledWord = document.getElementById("called-word");
    const checkPanel = document.getElementById("check-panel");
    const winners = document.getElementById("winners");

    function shuffle(array) {
      return [...array].sort(() => Math.random() - 0.5);
    }

    function createBoard() {
      board.innerHTML = "";
      boardWords = shuffle(words).slice(0, 25);
      boardWords.forEach(word => {
        const div = document.createElement("div");
        div.className = "cell";
        div.textContent = word;
        div.onclick = () => {
          div.classList.toggle("marked");
          checkWin();
        };
        board.appendChild(div);
      });
    }

    function startGame() {
      shuffled = shuffle(boardWords);
      currentIndex = 0;
      called = [];
      lineClaimed = false;
      bingoClaimed = false;
      document.getElementById("line-btn").disabled = false;
      document.getElementById("bingo-btn").disabled = false;
      winners.innerHTML = "";
      createBoard();
      clearInterval(intervalId);
      intervalId = setInterval(showNextWord, 5000);
    }

    function showNextWord() {
      if (currentIndex < shuffled.length) {
        const word = shuffled[currentIndex++];
        called.push(word);
        calledWord.textContent = word;
      } else {
        calledWord.textContent = "Game over";
        clearInterval(intervalId);
      }
    }

    function pauseGame() {
      clearInterval(intervalId);
    }

    function resumeGame() {
      intervalId = setInterval(showNextWord, 10000);
    }

    function stopGame() {
      clearInterval(intervalId);
      calledWord.textContent = "Stopped";
    }

    function restartGame() {
      stopGame();
      startGame();
    }

    function displayCalledWords(callback) {
      checkPanel.innerHTML = "";
      checkPanel.style.display = "flex";
      called.forEach(word => {
        const div = document.createElement("div");
        div.className = "check-word";
        div.textContent = word;
        div.onclick = () => div.classList.toggle("selected");
        checkPanel.appendChild(div);
      });

      const submitBtn = document.createElement("button");
      submitBtn.textContent = "Confirmar";
      submitBtn.style.margin = "20px auto";
      submitBtn.onclick = () => {
        const selectedWords = [...document.querySelectorAll(".check-word.selected")].map(div => div.textContent);
        callback(selectedWords);
        checkPanel.innerHTML = "";
        checkPanel.style.display = "none";
      };
      checkPanel.appendChild(submitBtn);
    }

    function checkLine() {
      displayCalledWords(selected => {
        const cells = [...document.querySelectorAll(".cell")];
        const grid = Array.from({length: 5}, (_, r) => cells.slice(r*5, r*5+5));
        const isLine = arr => arr.every(cell => selected.includes(cell.textContent));

        for (let i = 0; i < 5; i++) {
          if (isLine(grid[i]) || isLine(grid.map(row => row[i]))) {
            const name = prompt("Â¡LÃ­nea correcta! Â¿QuiÃ©n la ha completado?");
            winners.innerHTML += `<div><strong>LÃ­nea:</strong> ${name}</div>`;
            document.getElementById("line-btn").disabled = true;
            return;
          }
        }

        if (isLine(grid.map((r, i) => r[i])) || isLine(grid.map((r, i) => r[4-i]))) {
          const name = prompt("Â¡LÃ­nea diagonal correcta! Â¿QuiÃ©n la ha completado?");
          winners.innerHTML += `<div><strong>LÃ­nea:</strong> ${name}</div>`;
          document.getElementById("line-btn").disabled = true;
          return;
        }

        alert("No hay lÃ­nea completa con las palabras seleccionadas.");
      });
    }

    function checkBingo() {
      displayCalledWords(selected => {
        const cells = [...document.querySelectorAll(".cell")];
        const allMatch = cells.every(cell => selected.includes(cell.textContent));

        if (allMatch) {
          const name = prompt("Â¡BINGO correcto! Â¿QuiÃ©n lo ha completado?");
          winners.innerHTML += `<div><strong>BINGO:</strong> ${name}</div>`;
          stopGame();
          document.getElementById("bingo-btn").disabled = true;
          document.getElementById("line-btn").disabled = true;
        } else {
          alert("No todas las palabras del bingo estÃ¡n en la lista seleccionada.");
        }
      });
    }

    function checkWin() {
      // Visual feedback only
    }
  </script>
</body>
</html>
